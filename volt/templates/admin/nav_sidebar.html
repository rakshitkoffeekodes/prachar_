{% load i18n static %}

<nav id="sidebarMenu" class="sidebar d-lg-block bg-gray-800 text-white collapse" data-simplebar>
    <div class="sidebar-inner px-4 pt-3">
        <div class="user-card d-flex d-md-none align-items-center justify-content-between justify-content-md-center pb-4">
            <div class="d-flex align-items-center">
                <div class="avatar-lg me-4">
                    <img src="{% static 'assets/img/team/profile-picture-3.jpg' %}"
                         class="card-img-top rounded-circle border-white"
                         alt="Bonnie Green">
                </div>
                <div class="d-block">
                    <h2 class="h5 mb-3">Hi, Jane</h2>
                    <form action="{% url 'admin:logout' %}" method="post">
                        {% csrf_token %}
                        <button type="submit" class="dropdown-item">
                            <i class="fas fa-sign-out-alt mr-2">logout</i>
                        </button>
                    </form>
                </div>
            </div>
            <div class="collapse-close d-md-none">
                <a href="#sidebarMenu" data-bs-toggle="collapse" data-bs-target="#sidebarMenu"
                   aria-controls="sidebarMenu"
                   aria-expanded="true" aria-label="Toggle navigation">
                    <svg class="icon icon-xs" fill="currentColor" viewBox="0 0 20 20"
                         xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd"
                              d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                              clip-rule="evenodd"></path>
                    </svg>
                </a>
            </div>
        </div>
        <ul class="nav flex-column pt-4 pt-md-0">
            <li class="nav-item {% if 'dashboard' in segment %}active{% endif %}">
                {% if request.user.is_superuser %}
                <a href="{% url 'admin:index' %}" class="nav-link">
                {% endif %}
                    <span class="sidebar-icon">
                        <svg class="icon icon-xs me-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                          <path d="M2 10a8 8 0 018-8v8h8a8 8 0 11-16 0z"></path>
                          <path d="M12 2.252A8.014 8.014 0 0117.748 8H12V2.252z"></path>
                        </svg>
                    </span>
                    <span class="sidebar-text">Dashboard</span>
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link" href="/myadmin/p_app/assigndevice/">
                    <i class="ni ni-bullet-list-67 text-default"></i>
                    <span class="sidebar-text"><i class="fa fa-table" style="color:#9ca3af"></i> Assign Device</span>
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link" href="/myadmin/p_app/campaign/">
                    <i class="ni ni-bullet-list-67 text-default"></i>
                    <span class="sidebar-text"><i class="fa fa-table" style="color:#9ca3af"></i> Campaign</span>
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link" href="/myadmin/p_app/captain/">
                    <i class="ni ni-bullet-list-67 text-default"></i>
                    <span class="sidebar-text"><i class="fa fa-table" style="color:#9ca3af"></i> Captain</span>
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link" href="/myadmin/p_app/client/">
                    <i class="ni ni-bullet-list-67 text-default"></i>
                    <span class="sidebar-text"><i class="fa fa-table" style="color:#9ca3af"></i> Client</span>
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link" href="/myadmin/p_app/vehiclelicenseinformation/">
                    <i class="ni ni-bullet-list-67 text-default"></i>
                    <span class="sidebar-text"><i class="fa fa-table" style="color:#9ca3af"></i> Vehicle License</span>
                </a>
            </li>

            <li class="nav-item">
                <span class="nav-link d-flex justify-content-between align-items-center" data-bs-toggle="collapse" data-bs-target="#menu-p_app">
                    <span>
                        <span class="sidebar-icon">
                            <svg class="icon icon-xs me-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" d="M2 5a2 2 0 012-2h8a2 2 0 012 2v10a2 2 0 002 2H4a2 2 0 01-2-2V5zm3 1h6v4H5V6zm6 6H5v2h6v-2z" clip-rule="evenodd"></path>
                                <path d="M15 7h1a2 2 0 012 2v5.5a1.5 1.5 0 01-3 0V7z"></path>
                            </svg>
                        </span>
                        <span class="sidebar-text" style="white-space: nowrap; width: 50px; overflow: hidden; text-overflow: clip;">Master</span>
                    </span>
                    <span class="link-arrow">
                        <svg class="icon icon-sm" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                        </svg>
                    </span>
                </span>

                <div class="multi-level collapse" role="list" id="menu-p_app" aria-expanded="false">
                    <ul class="flex-column nav">
                        <li class="nav-item">
                            <a class="nav-link prevent-collapse" id="master1" href="/myadmin/p_app/city/">
                                <i class="ni ni-bullet-list-67 text-default"></i>
                                <span class="sidebar-text"><i class="fa fa-table" style="color:#9ca3af"></i> City</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link prevent-collapse" id="master2" href="/myadmin/p_app/country/">
                                <i class="ni ni-bullet-list-67 text-default"></i>
                                <span class="sidebar-text"><i class="fa fa-table" style="color:#9ca3af"></i> Country</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link prevent-collapse" id="master3" href="/myadmin/p_app/state/">
                                <i class="ni ni-bullet-list-67 text-default"></i>
                                <span class="sidebar-text"><i class="fa fa-table" style="color:#9ca3af"></i> State</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link prevent-collapse" id="master4" href="/myadmin/p_app/area/">
                                <i class="ni ni-bullet-list-67 text-default"></i>
                                <span class="sidebar-text"><i class="fa fa-table" style="color:#9ca3af"></i> Area</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </li>

            <li class="nav-item">
                <span class="nav-link d-flex justify-content-between align-items-center" data-bs-toggle="collapse" data-bs-target="#menu-auth">
                    <span>
                        <span class="sidebar-icon">
                            <svg class="icon icon-xs me-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" d="M2 5a2 2 0 012-2h8a2 2 0 012 2v10a2 2 0 002 2H4a2 2 0 01-2-2V5zm3 1h6v4H5V6zm6 6H5v2h6v-2z" clip-rule="evenodd"></path>
                                <path d="M15 7h1a2 2 0 012 2v5.5a1.5 1.5 0 01-3 0V7z"></path>
                            </svg>
                        </span>
                        <span class="sidebar-text" style="white-space: nowrap; width: 50px; overflow: hidden; text-overflow: clip;">Authentication</span>
                    </span>
                    <span class="link-arrow">
                        <svg class="icon icon-sm" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                        </svg>
                    </span>
                </span>

                <div class="multi-level collapse" role="list" id="menu-auth" aria-expanded="false">
                    <ul class="flex-column nav">
                        <li class="nav-item">
                            <a class="nav-link" href="/myadmin/auth/group/">
                                <i class="ni ni-bullet-list-67 text-default"></i>
                                <span class="sidebar-text"><i class="fa fa-table" style="color:#9ca3af"></i> Group</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/myadmin/auth/user/">
                                <i class="ni ni-bullet-list-67 text-default"></i>
                                <span class="sidebar-text"><i class="fa fa-table" style="color:#9ca3af"></i> User</span>
                            </a>
                        </li>

                    </ul>
                </div>
            </li>
        </ul>
    </div>
</nav>

<script>

    document.addEventListener('DOMContentLoaded', function () {
        const firstDropdown = document.querySelector('#menu-p_app');
        const secondDropdown = document.querySelector('#menu-auth');
        const firstDropdownLinks = firstDropdown.querySelectorAll('.prevent-collapse');
        const secondDropdownTrigger = document.querySelector('[data-bs-target="#menu-auth"]');
        const firstDropdownTrigger = document.querySelector('[data-bs-target="#menu-p_app"]');

        firstDropdownLinks.forEach(link => {
            link.addEventListener('click', function (event) {
                event.stopPropagation();
            });
        });

        secondDropdownTrigger.addEventListener('click', function () {
            if (firstDropdown.classList.contains('show')) {
                new bootstrap.Collapse(firstDropdown, {
                    toggle: true
                });
            }
        });


        firstDropdownTrigger.addEventListener('click', function () {
            if (secondDropdown.classList.contains('show')) {
                new bootstrap.Collapse(secondDropdown, {
                    toggle: true
                });
            }
        });
    });

</script>

